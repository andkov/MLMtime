{
    "contents" : "---\ntitle: \"Reporting Statistical Models (demo)\"\nauthor: \"Andrey Koval\"\ndate: \"Friday, January 30, 2015\"\noutput:\n  html_document:\n    css: ~/GitHub/psy564/libs/css/sidebar.css\n    highlight: haddock\n    theme: spacelab\n    toc: yes\n---\n\n<!--  Set the working directory to the repository's base directory; this assumes the report is nested inside of only one directory.-->\n```{r, echo=F, message=F} \nlibrary(knitr)\nopts_knit$set(root.dir='../../../')  #Don't combine this call with any other chunk -especially one that uses file paths.\n```\n\n<!-- Set the report-wide options, and point to the external script file. -->\n```{r, echo=F, message=T}\nrequire(knitr)\nopts_chunk$set(\n  results='show', \n  message = TRUE,\n  comment = NA, \n  tidy = FALSE,\n#   fig.height = 4.8, \n#   fig.width = 6.5, \n  out.width = NULL,\n  fig.path = 'figure_rmd/',     \n  dev = \"png\",\n  dpi = 70\n)\nechoChunks <- FALSE\nwarningChunks<- FALSE\nmessageChunks<- FALSE\noutwidthChunks <- \"90%\"\noptions(width=120) #So the output is 50% wider than the default.\nread_chunk(\"./Chapters/05/R_Chapter5/hoffman-ch5.R\") # the file to which knitr calls for the chunks\n```\n\n\n# Resources\n\n#### General R\n\n\n- [A GOOD PLACE TO START LEARNING R](http://www.rstudio.com/resources/training/online-learning/) - The RStudio team collects the best online resources.  \n\n- [Swirl](http://swirlstats.com/students.html) and [DataCamp](https://www.datacamp.com/courses/introduction-to-r)  offer interactive courses.  \n\n- for brief reviews of key books and resources see Will Beasley's [Resources Opinions](https://github.com/OuhscBbmc/RedcapExamplesAndPatterns/blob/master/DocumentationGlobal/ResourcesOpinions.md)  \n\n - another presentation by Will provides an excellent overview of [Statistical Collaboration with GitHub](http://htmlpreview.github.io/?https://raw.githubusercontent.com/OuhscBbmc/StatisticalComputing/master/2014_Presentations/05_May/BeasleyScugGitHub2014-05.html#/)\n - Winston Chan's [R Cookbook](http://shop.oreilly.com/product/9780596809164.do) is a perfect book to get you started with producing graphs with RStudio  \n - [Quick-R](http://www.statmethods.net/) Quick and convenient resource for R reference  \n - [60+ resources for learning R](http://www.computerworld.com/article/2497464/business-intelligence-60-r-resources-to-improve-your-data-skills.html) Will give you more than you can handle. Browse and see which resource fits your learning style and organizes information in the manner that makes sense to you.\n\n#### Modeling\n\n  - [stats::lm()](http://www.rdocumentation.org/packages/stats/functions/lm) function, see [Gelman & Hill](http://www.stat.columbia.edu/~gelman/arm/), pages 38-39       \n  - [stats::glm()](http://www.rdocumentation.org/packages/stats/functions/glm) function     \n  - [nlme::gls()](http://www.rdocumentation.org/packages/nlme/functions/gls) function    \n  - see a basic example of model result processing in the slides on [Statistical Modeling](http://ialsa.github.io/COAG-colloquium-2014F/2014-11-18-Statistical-Modeling.html#35) of the COAG [Colloquium series](http://ialsa.github.io/COAG-colloquium-2014F) on reproducible research.  \n  - [lme4::lmer](http://www.rdocumentation.org/packages/nlme/functions/gls) function,  see [Gelman & Hill](http://www.stat.columbia.edu/~gelman/arm/), pages 259-262 and Appendix C. \n  - [lmer guide](http://htmlpreview.github.io/?https://github.com/andkov/Longitudinal_Models_of_Religiosity_NLSY97/blob/master/Vignettes/lmer/for%20Appendix/lmerGuide.html#adding-model-output). Shows direct interaction with the model object, not through functions like Gelman & Hill show.\n\n# Data prep\n\n Today we will look at the data example from chapter 5 of [Longitudinal Analysis](http://www.pilesofvariance.com/) by Lesa Hoffman. You will find all the necessary files at\n\n```\n ./Chapters/05/R_Chapter5/\n```\n after you [download and unzip](https://github.com/andkov/psy564/archive/master.zip) the folder of this repository.\n\n```\n ./Chapters/05/R_Chapter5/hoffman-ch5.R\n```\n contains that conducts the analysis and \n   \n```\n ./Chapters/03/R_Chapter3/hoffman-ch3.Rmd\n```\ncontains the [report](https://github.com/andkov/psy564/blob/master/Chapters/03/R_Chapter3/hoffman-ch3.html). Html file must be compiled before it can be viewed. You can view .html files stored on GitHub.com by pasting their url address into [HTMLpreviewer](http://htmlpreview.github.io/?)\n\n#### Working files\n - [hoffman-ch5.R](https://github.com/andkov/psy564/blob/master/Chapters/03/R_Chapter3/hoffman-ch3.R) contains the script that replicates **example 3a** from Chapter 3 of [Longitudinal Analysis](http://www.pilesofvariance.com/) by Lesa Hoffman. We fit empty between-person (3.1) and empty within-person (3.2) models to the supplied dataset containing 2 measures for 50 subjects.\n - [hoffman-ch5.Rmd](http://htmlpreview.github.io/?https://github.com/andkov/psy564/blob/master/Chapters/03/R_Chapter3/hoffman-ch3.html) contains annotations to what happens in <code>hoffman-ch5.R</code> script. HTML is \"knitted\" in RStudio by knitr package by combining .R and .Rmd files: explainations for computer and for humans, respectively.  This report is a self-contained account of two statistical models.  \n - [hoffman-ch5.html]() the webpage you are reading right now\n \n\n## Data input\n\nBefore asking R to perform operations (functions), we load the packages which contain the definitions of these functions. \n```{r LoadPackages, warning=F,message=F}\n\n```\n\nWe would like to import data the data file\n\n```\nSAS_Chapter5.sas7bdat\n```\n\nlocated at \n\n```\n./Chapters/05/SAS_Chapter5/\n```\n\nof your repository. \n\n```{r LoadData}\n\n```\n\n\n## Data inspection\n\nWe'd like to inspect the data object we've just imported. Doulbe-click the icon of the dataset in the Environment tab of RStudio or use \n```\nView(ds)\n```\nA few basic function calls give us a quick look ath the object *ds0* - our \"ground zero\" in the chain of data transformations\n```{r BasicDescriptive}\n\n```\n\n\n## Wide to Long\n\nOur data were in a long format, with each level of the variable *wave* recorded in a single column \n```{r}\nhead(ds0)\n```\n\nNo other transformation is necessary. \n```{r StackData}\n\n```\nSuffix \"L\" in \"dsL\" signifies that the data is in the **L**ong format.\n\n## Data tweaking\n\nData didn't require any tweaking.\n```{r TweakLong}\n\n```\nSuffix \"M\" in \"dsM\" signifies that the data is ready for  **M**odeling\n\n# Graphing\n\nTo better understand the patterns we visualize the data with a simple line plot\n```{r GraphingData0}\n\n```\n\nTo make the graph more readable and informative we customize it with a set of presets collected in a ggplot theme\n```{r LoadGraphThemes}\n\n```\n\nand add customizations relevant to current scenario\n\n```{r GraphingData1}\n\n```\n\nblack lines give us a longitudinal perspective on the data, depicting the observed trajectories of individuals. To juxtapose is with cross-sectional perspective, we can add a different geom, styled to contrast the difference \n\n```{r GraphingData2}\n\n```\n\n\n\n# Modeling \n\n## 3.1\nThe baseline for the models to follow is the empty between-person model with no predictors\n\n\n$\\begin{array}{l}\n{y_{ti}} = {\\beta _{0i}} + {\\varepsilon _{ti}}\\\\\n{\\beta _{0i}} = {\\gamma _{00}}\\\\\n{}\\\\\n{y_{ti}} = {\\gamma _{00}} + {\\varepsilon _{ti}}\n\\end{array}$\n\n\n### Run m3.1\n```{r RunM3_1}\n\n```\n\n### Inspect m3.1\n```{r InspectM3_1}\n\n```\n\n### Graph m3.1\n```{r GraphM3_1}\n\n```\n\n### Full Spec m3.1\n![graph m3.1](./images/m3.1.JPG)\n\n## 5.1 \n\nNow we'd like to see how this basic model prediction will change when we compute a **U**nique intercept for each person\n\n$\\begin{array}{l}\n{y_{ti}} = {\\beta _{0i}} + {\\varepsilon _{ti}}\\\\\n{\\beta _{0i}} = {\\gamma _{00}} + {u_{0i}}\\\\\n{}\\\\\n{y_{ti}} = ({\\gamma _{00}} + {u_{0i}}) + {\\varepsilon _{ti}}\n\\end{array}$\n\n### Run m5.1\n```{r RunM5_1}\n\n```\n\n### Inspect m5.1\n```{r InspectM5_1}\n\n```\n\n### Graph m5.1\n```{r GraphM5_1}\n\n```\n\n### Full Spec m5.1\n![graph m5.1](./images/m5.1.JPG)\n\n## 5.3\n\nThe first predictor we will enter into our model is the fixed effect of linear time\n\n$\\begin{array}{l}\n{y_{ti}} = {\\beta _{0i}} + {\\beta _{1i}}TV{C_{1ti}} + {\\varepsilon _{ti}}\\\\\n{\\beta _{0i}} = {\\gamma _{00}} + {u_{0i}}\\\\\n{\\beta _{1i}} = {\\gamma _{10}}\\\\\n{}\\\\\n{y_{ti}} = ({\\gamma _{00}} + {u_{0i}}) + {\\gamma _{10}}(TV{C_{1ti}}) + {\\varepsilon _{ti}}\n\\end{array}$\n\n\n### Run m5.3\n```{r RunM5_3}\n\n```\n\n### Inspect m5.3\n```{r InspectM5_3}\n\n```\n\n### Graph m5.3\n```{r GraphM5_3}\n\n```\n\n### Full Spec m5.3\n![graph m5.3](./images/m5.3.JPG)\n\n## 5.5\n\nNow would like to compute a unique linear slope for each individual\n\n$\\begin{array}{l}\n{y_{ti}} = {\\beta _{0i}} + {\\beta _{1i}}TV{C_{1ti}} + {\\varepsilon _{ti}}\\\\\n{\\beta _{0i}} = {\\gamma _{00}} + {u_{0i}}\\\\\n{\\beta _{1i}} = {\\gamma _{10}} + {u_{1i}}\\\\\n{}\\\\\n{y_{ti}} = ({\\gamma _{00}} + {u_{0i}}) + ({\\gamma _{10}} + {u_{1i}})(TV{C_{1ti}}) + {\\varepsilon _{ti}}\n\\end{array}$\n\n### Run m5.5\n```{r RunM5_5}\n\n```\n\n### Inspect m5.5\n```{r InspectM5_5}\n\n```\n\n### Graph m5.5\n```{r GraphM5_5}\n\n```\n\n### Full Spec m5.5\n![graph m5.5](./images/m5.5.JPG)\n\n</br> </br> </br> </br> </br> </br> </br> </br> </br> </br> </br> </br> </br> </br> </br> </br> </br> </br> </br> </br> </br>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n  \n\n  \n \n",
    "created" : 1422296970054.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3786194491",
    "id" : "CF7B4EAA",
    "lastKnownWriteTime" : 1422382945,
    "path" : "~/GitHub/psy564/Chapters/05/R_Chapter5/hoffman-ch5.Rmd",
    "project_path" : "Chapters/05/R_Chapter5/hoffman-ch5.Rmd",
    "properties" : {
    },
    "source_on_save" : false,
    "type" : "r_markdown"
}